{"ast":null,"code":"import { interval, forkJoin } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/jokes.service\";\nimport * as i2 from \"src/app/services/images.service\";\nexport class DogJokeComponent {\n  constructor(jokeServ, imgServ) {\n    this.jokeServ = jokeServ;\n    this.imgServ = imgServ;\n    this.joke = '';\n    this.punchline = '';\n    this.urlImg = '';\n    this.seconds = 0;\n  }\n  ngOnInit() {\n    this.loadData();\n    //this.startSubscription()\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n  loadData() {\n    this.seconds = 20;\n    forkJoin({\n      dogData: this.imgServ.getImg(),\n      jokeData: this.jokeServ.getJoke()\n    }).subscribe(({\n      dogData,\n      jokeData\n    }) => {\n      this.urlImg = dogData.message;\n      this.joke = jokeData.setup;\n      this.punchline = jokeData.punchline;\n    });\n  }\n  startSubscription() {\n    this.subscription = interval(1000).subscribe(() => {\n      this.seconds--;\n      if (this.seconds === 0) {\n        this.loadData();\n      }\n    });\n  }\n  refreshData() {\n    this.subscription.unsubscribe();\n    this.loadData();\n    this.startSubscription();\n  }\n}\nDogJokeComponent.ɵfac = function DogJokeComponent_Factory(t) {\n  return new (t || DogJokeComponent)(i0.ɵɵdirectiveInject(i1.JokesService), i0.ɵɵdirectiveInject(i2.ImagesService));\n};\nDogJokeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DogJokeComponent,\n  selectors: [[\"app-dog-joke\"]],\n  decls: 11,\n  vars: 4,\n  consts: [[1, \"outer-container\"], [1, \"container\"], [1, \"image\"], [\"alt\", \"img-dog\", 3, \"src\"], [1, \"text\"], [1, \"custom-button\", 3, \"click\"]],\n  template: function DogJokeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n      i0.ɵɵelement(3, \"img\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 4)(5, \"h3\");\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"p\");\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function DogJokeComponent_Template_button_click_9_listener() {\n        return ctx.refreshData();\n      });\n      i0.ɵɵtext(10);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.urlImg, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.joke);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"\", ctx.punchline, \"...\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"\", ctx.seconds, \" seconds.\");\n    }\n  },\n  styles: [\".outer-container[_ngcontent-%COMP%]{\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n}\\r\\n.container[_ngcontent-%COMP%] {\\r\\n    background-color:rgba(255,202,0,255); \\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n    width: 750px;\\r\\n    height: 400px;\\r\\n}\\r\\n  \\r\\n.image[_ngcontent-%COMP%] {\\r\\n    position: relative;\\r\\n    left: 50px;\\r\\n    bottom: -70px;\\r\\n}\\r\\n\\r\\n.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\r\\n    width: 300px;\\r\\n    height: 450px;\\r\\n}\\r\\n  \\r\\n.text[_ngcontent-%COMP%] {\\r\\n    margin: 0 auto;\\r\\n    max-width: 300px;\\r\\n    margin-right: 20px;\\r\\n}\\r\\n\\r\\n.text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 10px;\\r\\n    word-wrap: break-word;\\r\\n}\\r\\n  \\r\\n.text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\r\\n    margin-top: 60px;\\r\\n    font-size: x-large;\\r\\n}\\r\\n\\r\\n.custom-button[_ngcontent-%COMP%] {\\r\\n    border: 2px solid #9b7905;\\r\\n    background-color: transparent;\\r\\n    color: #6c6d53;\\r\\n    font-size: larger;\\r\\n    margin-top: 40px;\\r\\n    margin-left: 20px;\\r\\n}\\r\\n\\r\\n  \\r\\n@media (max-width: 1196px) {\\r\\n    .container[_ngcontent-%COMP%] {\\r\\n      flex-direction: column;\\r\\n      text-align: center;\\r\\n    }\\r\\n  \\r\\n    .image[_ngcontent-%COMP%] {\\r\\n      left: 0;\\r\\n      bottom: 0;\\r\\n      margin-bottom: 20px;\\r\\n    }\\r\\n  \\r\\n    .custom-button[_ngcontent-%COMP%] {\\r\\n      margin-top: 20px;\\r\\n      margin-bottom: 20px;\\r\\n    }\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvZG9nLWpva2UvZG9nLWpva2UuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7RUFDYix1QkFBdUI7QUFDekI7QUFDQTtJQUNJLG9DQUFvQztJQUNwQyxhQUFhO0lBQ2IsbUJBQW1CO0lBQ25CLFlBQVk7SUFDWixhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksa0JBQWtCO0lBQ2xCLFVBQVU7SUFDVixhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksWUFBWTtJQUNaLGFBQWE7QUFDakI7O0FBRUE7SUFDSSxjQUFjO0lBQ2QsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLG1CQUFtQjtJQUNuQixxQkFBcUI7QUFDekI7O0FBRUE7SUFDSSxnQkFBZ0I7SUFDaEIsa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0kseUJBQXlCO0lBQ3pCLDZCQUE2QjtJQUM3QixjQUFjO0lBQ2QsaUJBQWlCO0lBQ2pCLGdCQUFnQjtJQUNoQixpQkFBaUI7QUFDckI7O0VBRUUsdUJBQXVCO0FBQ3pCO0lBQ0k7TUFDRSxzQkFBc0I7TUFDdEIsa0JBQWtCO0lBQ3BCOztJQUVBO01BQ0UsT0FBTztNQUNQLFNBQVM7TUFDVCxtQkFBbUI7SUFDckI7O0lBRUE7TUFDRSxnQkFBZ0I7TUFDaEIsbUJBQW1CO0lBQ3JCO0FBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIub3V0ZXItY29udGFpbmVye1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbn1cclxuLmNvbnRhaW5lciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMjU1LDIwMiwwLDI1NSk7IFxyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICB3aWR0aDogNzUwcHg7XHJcbiAgICBoZWlnaHQ6IDQwMHB4O1xyXG59XHJcbiAgXHJcbi5pbWFnZSB7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICBsZWZ0OiA1MHB4O1xyXG4gICAgYm90dG9tOiAtNzBweDtcclxufVxyXG5cclxuLmltYWdlIGltZyB7XHJcbiAgICB3aWR0aDogMzAwcHg7XHJcbiAgICBoZWlnaHQ6IDQ1MHB4O1xyXG59XHJcbiAgXHJcbi50ZXh0IHtcclxuICAgIG1hcmdpbjogMCBhdXRvO1xyXG4gICAgbWF4LXdpZHRoOiAzMDBweDtcclxuICAgIG1hcmdpbi1yaWdodDogMjBweDtcclxufVxyXG5cclxuLnRleHQgaDMge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcclxufVxyXG4gIFxyXG4udGV4dCBwIHtcclxuICAgIG1hcmdpbi10b3A6IDYwcHg7XHJcbiAgICBmb250LXNpemU6IHgtbGFyZ2U7XHJcbn1cclxuXHJcbi5jdXN0b20tYnV0dG9uIHtcclxuICAgIGJvcmRlcjogMnB4IHNvbGlkICM5Yjc5MDU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICAgIGNvbG9yOiAjNmM2ZDUzO1xyXG4gICAgZm9udC1zaXplOiBsYXJnZXI7XHJcbiAgICBtYXJnaW4tdG9wOiA0MHB4O1xyXG4gICAgbWFyZ2luLWxlZnQ6IDIwcHg7XHJcbn1cclxuXHJcbiAgLyogRXN0aWxvcyByZXNwb25zaXZlICovXHJcbkBtZWRpYSAobWF4LXdpZHRoOiAxMTk2cHgpIHtcclxuICAgIC5jb250YWluZXIge1xyXG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAuaW1hZ2Uge1xyXG4gICAgICBsZWZ0OiAwO1xyXG4gICAgICBib3R0b206IDA7XHJcbiAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAuY3VzdG9tLWJ1dHRvbiB7XHJcbiAgICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"names":["interval","forkJoin","DogJokeComponent","constructor","jokeServ","imgServ","joke","punchline","urlImg","seconds","ngOnInit","loadData","ngOnDestroy","subscription","unsubscribe","dogData","getImg","jokeData","getJoke","subscribe","message","setup","startSubscription","refreshData","i0","ɵɵdirectiveInject","i1","JokesService","i2","ImagesService","selectors","decls","vars","consts","template","DogJokeComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵlistener","DogJokeComponent_Template_button_click_9_listener","ɵɵadvance","ɵɵpropertyInterpolate","ɵɵsanitizeUrl","ɵɵtextInterpolate","ɵɵtextInterpolate1"],"sources":["C:\\xampp\\htdocs\\prueba-angular-adoclic\\src\\app\\pages\\dog-joke\\dog-joke.component.ts","C:\\xampp\\htdocs\\prueba-angular-adoclic\\src\\app\\pages\\dog-joke\\dog-joke.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { JokesService } from 'src/app/services/jokes.service';\nimport { Subscription, interval, forkJoin  } from 'rxjs';\nimport { ImagesService } from 'src/app/services/images.service';\n\n@Component({\n  selector: 'app-dog-joke',\n  templateUrl: './dog-joke.component.html',\n  styleUrls: ['./dog-joke.component.css']\n})\nexport class DogJokeComponent implements OnInit, OnDestroy {\n\n  joke : string = '';\n  punchline : string = '';\n  urlImg : string = '';\n  subscription !: Subscription;\n  seconds : number = 0;\n  intervalId: any;\n\n  constructor(private jokeServ : JokesService, private imgServ : ImagesService) { }\n\n  ngOnInit(): void {\n    this.loadData()\n    //this.startSubscription()\n  }\n  \n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n  loadData(){\n    this.seconds = 20;\n    forkJoin({\n      dogData: this.imgServ.getImg(),\n      jokeData: this.jokeServ.getJoke()\n    }).subscribe(({ dogData, jokeData }) => {\n      this.urlImg = dogData.message;\n      this.joke = jokeData.setup;\n      this.punchline = jokeData.punchline;\n    });\n  }\n\n  startSubscription(){\n    this.subscription = interval(1000).subscribe(() => {      \n      this.seconds--;      \n      if(this.seconds === 0){\n        this.loadData()\n      }      \n    });\n  }\n  \n  refreshData() {\n    this.subscription.unsubscribe();\n    this.loadData()\n    this.startSubscription()\n  }\n\n}\n","\n<div class=\"outer-container\">\n    <div class=\"container\">\n        <div class=\"image\">\n            \n            <img src=\"{{urlImg}}\" alt=\"img-dog\">\n        </div>\n        <div class=\"text\">\n            <h3>{{ joke }}</h3>\n            <p>{{ punchline }}...</p>\n            <button class=\"custom-button\" (click)=\"refreshData()\">{{ seconds }} seconds.</button>\n        </div>            \n    </div>\n\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}